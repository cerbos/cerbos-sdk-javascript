version: v2

clean: true

inputs:
  - directory: proto
    types:
      - cerbos.cloud.epdp.v1.Metadata
      - cerbos.cloud.epdp.v2.Config
      - cerbos.cloud.epdp.v2.Error
      - cerbos.cloud.epdp.v2.Metadata
      - cerbos.svc.v1.CerbosAdminService
      - cerbos.svc.v1.CerbosService
      - grpc.health.v1.Health

plugins:
  - local: node_modules/.bin/protoc-gen-es
    out: packages/api/src/protobuf
    opt:
      - target=ts
      - json_types=true
      - valid_types=protovalidate_required
