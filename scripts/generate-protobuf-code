#!/usr/bin/env bash
set -o errexit
set -o nounset
set -o pipefail

target_dir="$1"
out_dir="${target_dir}/src/protobuf"

buf generate --template="${target_dir}/buf.gen.yaml"

scripts/sed-all "${out_dir}" -- '/@generated by protoc-gen-es v/d'

prettier --log-level=warn --write "${out_dir}"
